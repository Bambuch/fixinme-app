<% ids = {row: dom_id(@unit, :edit),
          hidden_row: dom_id(@unit),
          link: nil,
          form_tag: dom_id(@unit, :edit, :form)} %>

<%= turbo_stream.append :unit_form do %>
  <%- tabular_form_with model: @unit, html: {id: ids[:form_tag]} do %>
  <% end %>
<% end %>

<%= turbo_stream.hide ids[:hidden_row] %>
<%= turbo_stream.remove ids[:row] %>
<%= turbo_stream.after @unit, partial: 'form', locals: ids -%>
