<% @self_and_progenies.each do |q| %>
  <%= turbo_stream.remove q %>
<% end %>
<% @previous_ancestors.union(@ancestors).map do |ancestor| %>
  <%= turbo_stream.replace ancestor %>
<% end %>
<% @self_and_progenies.each do |q| %>
  <%= @before.nil? ? turbo_stream.append(:quantities, q) : turbo_stream.before(@before, q) %>
<% end %>
